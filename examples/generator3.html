<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script>
			// sub数据 ---> 依赖super数据 ---> 依赖global数据
			function getSub(superData, globalData) {
				setTimeout(() => {
					let data = 'sub数据'
					console.log(superData, globalData)
				}, 1000)
			}
			function getSuper() {
				setTimeout(() => {
					let data = 'super数据'
					iterator.next(data)
				}, 1000)
			}
			function getGlobal() {
				setTimeout(() => {
					let data = 'global数据'
					iterator.next(data)
				}, 1000)
			}

			function* gen() {
				// yield后面的函数在next()调用时执行
				let globalData = yield getGlobal()
				let superData = yield getSuper()
				yield getSub(superData, globalData)
			}

			let iterator = gen()
			iterator.next()
		</script>
	</body>
</html>
